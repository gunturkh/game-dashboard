import{G as I,H as T,r as h,j as e,F as Z,c as l,C as O,I as S,bb as R,ax as E,W as U,bc as G,T as Q,J as _,Q as F,bd as B,a4 as ee,D as te,o as D,be as ae,a as se,aL as le}from"./index.c3bfd613.js";import{r as M}from"./index.8a249f4e.js";import{G as re,S as ie}from"./Table.ab007848.js";import{u as W,C as ne}from"./index.esm.a72616c3.js";import{c as J,a as L,o as K,g as ce}from"./object.a233b247.js";import{u as oe,a as X,b as de,c as me}from"./imageApiSlice.1ba03d6d.js";import"./upperFirst.93ed485a.js";const ue=({cards:o})=>{const a=I(),g=T(),b=[{Header:"Name",accessor:"name",Cell:t=>{var s,j,w,V,z,H;return l("div",{className:"flex space-x-3 items-center text-left rtl:space-x-reverse",children:[e("div",{className:"flex-none",children:e("div",{className:"h-10 w-10 rounded-full text-sm bg-[#E0EAFF] dark:bg-slate-700 flex flex-col items-center justify-center font-medium -tracking-[1px]",children:((s=t==null?void 0:t.cell)==null?void 0:s.value.charAt(0))+((w=t==null?void 0:t.cell)==null?void 0:w.value.charAt(((j=t==null?void 0:t.cell)==null?void 0:j.value.length)-1))})}),e("div",{className:"flex-1 font-medium text-sm leading-4 whitespace-nowrap",children:((V=t==null?void 0:t.cell)==null?void 0:V.value.length)>20?((z=t==null?void 0:t.cell)==null?void 0:z.value.substring(0,20))+"...":(H=t==null?void 0:t.cell)==null?void 0:H.value})]})}},{Header:"action",accessor:"action",Cell:t=>e("div",{children:e("div",{className:"grid grid-cols-[100px_100px_100px] gap-2 divide-x divide-slate-100 dark:divide-slate-800",children:k.map((s,j)=>e("div",{onClick:()=>{var w;return s.doit((w=t==null?void 0:t.row)==null?void 0:w.original)},children:l("div",{className:`
                
                  ${s.name==="delete"?"bg-danger-500 text-danger-500 bg-opacity-30   hover:bg-opacity-100 hover:text-white":"hover:bg-slate-900 hover:text-white dark:hover:bg-slate-600 dark:hover:bg-opacity-50"}
                   w-full border border-gray-500 border-opacity-10 px-4 py-2 text-sm  last:mb-0 cursor-pointer 
                   first:rounded-t last:rounded-b flex  space-x-2 items-center rtl:space-x-reverse `,children:[e("span",{className:"text-base",children:e(S,{icon:s.icon})}),e("span",{children:s.name})]})},j))})})}],k=[{name:"view",icon:"heroicons-outline:eye",doit:t=>g(`/categories/${t.id}`)},{name:"edit",icon:"heroicons:pencil-square",doit:t=>a(R(t))}],d=h.exports.useMemo(()=>b,[]),p=h.exports.useMemo(()=>o,[o]),N=M.exports.useTable({columns:d,data:p},M.exports.useGlobalFilter,M.exports.useSortBy,M.exports.usePagination,M.exports.useRowSelect),{getTableProps:f,getTableBodyProps:r,headerGroups:i,footerGroups:n,page:x,nextPage:v,previousPage:m,canNextPage:c,canPreviousPage:y,pageOptions:u,state:C,gotoPage:P,pageCount:$,setPageSize:q,setGlobalFilter:xe,prepareRow:Y}=N,{globalFilter:be,pageIndex:A,pageSize:fe}=C;return e(Z,{children:l(O,{noborder:!0,children:[e("div",{className:"md:flex justify-between items-center mb-6",children:e("h4",{className:"card-title",children:"Project List"})}),e("div",{className:"overflow-x-auto -mx-6",children:e("div",{className:"inline-block min-w-full align-middle",children:e("div",{className:"overflow-hidden ",children:l("table",{className:"min-w-full divide-y divide-slate-100 table-fixed dark:divide-slate-700",...f,children:[e("thead",{className:" bg-slate-100 dark:bg-slate-700",children:i.map(t=>e("tr",{...t.getHeaderGroupProps(),children:t.headers.map(s=>l("th",{...s.getHeaderProps(s.getSortByToggleProps()),scope:"col",className:" table-th ",children:[s.render("Header"),e("span",{children:s.isSorted?s.isSortedDesc?" \u{1F53D}":" \u{1F53C}":""})]}))}))}),e("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",...r,children:x.map(t=>(Y(t),e("tr",{...t.getRowProps(),className:" even:bg-slate-100 dark:even:bg-slate-700",children:t.cells.map(s=>e("td",{...s.getCellProps(),className:"table-td",children:s.render("Cell")}))})))})]})})})}),l("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[l("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[l("span",{className:" flex space-x-2  rtl:space-x-reverse items-center",children:[e("span",{className:" text-sm font-medium text-slate-600 dark:text-slate-300",children:"Go"}),e("span",{children:e("input",{type:"number",className:" form-control py-2",defaultValue:A+1,onChange:t=>{const s=t.target.value?Number(t.target.value)-1:0;P(s)},style:{width:"50px"}})})]}),l("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",l("span",{children:[A+1," of ",u.length]})]})]}),l("ul",{className:"flex items-center  space-x-3  rtl:space-x-reverse",children:[e("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e("button",{className:` ${y?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>m(),disabled:!y,children:e(S,{icon:"heroicons-outline:chevron-left"})})}),u.map((t,s)=>e("li",{children:e("button",{href:"#","aria-current":"page",className:` ${s===A?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100  dark:text-slate-400 text-slate-900  font-normal "}    text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>P(s),children:t+1})},s)),e("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e("button",{className:` ${c?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>v(),disabled:!c,children:e(S,{icon:"heroicons-outline:chevron-right"})})})]})]})]})})},he=()=>{var m;const{openCategoryModal:o}=E(c=>c.card),{token:a}=E(c=>c.auth);console.log("token inside modal add card",a);const g=I();h.exports.useState("initial");const[b]=oe(),[k,{isLoading:d}]=X(),p=J({name:L().required("Category name is required")}).required(),{register:N,control:f,reset:r,formState:{errors:i},handleSubmit:n,setValue:x}=W({resolver:K(p),mode:"all"});return console.log("errors",i),e("div",{children:e(U,{title:"Create Card Category",labelclassName:"btn-outline-dark",activeModal:o,onClose:()=>g(G(!1)),children:l("form",{onSubmit:n(async c=>{try{console.log("data",c);const{name:y,icon_url:u}=c,P=await b({name:y,icon_url:"string"});console.log("response create card",P.data),F.success("Add Category Successful"),g(G(!1)),r()}catch(y){F.error(y.message)}}),className:"space-y-4 ",children:[e(Q,{name:"name",label:"Category Name",placeholder:"Category Name",register:N,error:i.name}),(i==null?void 0:i.icon_url)&&e("div",{className:" mt-2 text-danger-500 block text-sm ",children:(m=i==null?void 0:i.icon_url)==null?void 0:m.message}),e("div",{className:"ltr:text-right rtl:text-left",children:e(_,{type:"submit",text:"Add Category",className:"btn btn-dark block w-full text-center ",isLoading:d})})]})})})},ge=()=>{var y;const{editCategoryModal:o,editCategoryItem:a}=E(u=>u.card),{token:g}=E(u=>u.auth);console.log("token inside modal add card",g);const b=I(),[k]=de(),[d,{isLoading:p}]=X(),N=J({name:L().required("Category name is required"),is_active:ce().required("Is Active is required"),icon_url:L()}).required(),{register:f,control:r,reset:i,formState:{errors:n},handleSubmit:x,setValue:v,getValues:m}=W({resolver:K(N),mode:"all",defaultValues:a});h.exports.useEffect(()=>{a&&(v("name",a.name),v("is_active",a.is_active))},[a]),console.log("errors",n),console.log("editCategoryItem",a);const c=async u=>{try{console.log("data",u);const{name:C,is_active:P}=u,$={id:a.id,name:C,icon_url:a.icon_url,is_active:P};console.log("edit card",$);const q=await k($);console.log("response edit card",q.data),F.success("Edit Category Successful"),b(B(!1)),i()}catch(C){F.error(C.message)}};return console.log("edit value",m()),e("div",{children:e(U,{title:"Edit Card Category",labelclassName:"btn-outline-dark",activeModal:o,onClose:()=>b(B(!1)),children:l("form",{onSubmit:x(c),className:"space-y-4 ",children:[e(Q,{name:"name",label:"Category Name",placeholder:"Category Name",register:f,error:n.name}),e(ne,{name:"is_active",control:r,render:({field:{onChange:u,value:C}})=>e(ee,{label:"Enable Category?",value:C,onChange:u})}),(n==null?void 0:n.icon_url)&&e("div",{className:" mt-2 text-danger-500 block text-sm ",children:(y=n==null?void 0:n.icon_url)==null?void 0:y.message}),e("div",{className:"ltr:text-right rtl:text-left",children:e(_,{type:"submit",text:"Edit Category",className:"btn btn-dark block w-full text-center ",isLoading:p})})]})})})},pe=({card:o})=>{const{name:a,is_active:g,startDate:b,endDate:k}=o;console.log("card",o);const d=I(),[p,N]=h.exports.useState(new Date(b)),[f,r]=h.exports.useState(new Date(k)),[i,n]=h.exports.useState(0);h.exports.useEffect(()=>{const m=Math.abs(f-p),c=Math.ceil(m/(1e3*60*60*24));n(c)},[p,f]);const x=T(),v=m=>{x(`/categories/${m.id}`)};return e(O,{children:l("header",{className:"flex justify-between items-end",children:[l("div",{className:"flex space-x-4 items-center rtl:space-x-reverse",children:[e("div",{className:"flex-none",children:e("div",{className:"h-10 w-10 rounded-md text-lg bg-slate-100 text-slate-900 dark:bg-slate-600 dark:text-slate-200 flex flex-col items-center justify-center font-normal capitalize",children:a.charAt(0)+a.charAt(1)})}),e("div",{className:"font-medium text-base leading-6",children:e("div",{className:"dark:text-slate-200 text-slate-900 max-w-[160px] truncate",children:`${a} ${g?"":"(Inactive)"}`})})]}),e("div",{children:e(te,{classMenuItems:" w-[130px]",label:e("span",{className:"text-lg inline-flex flex-col items-center justify-center h-8 w-8 rounded-full bg-gray-500-f7 dark:bg-slate-900 dark:text-slate-400",children:e(S,{icon:"heroicons-outline:dots-vertical"})}),children:l("div",{children:[e(D.Item,{onClick:()=>v(o),children:l("div",{className:"hover:bg-slate-900 dark:hover:bg-slate-600 dark:hover:bg-opacity-70 hover:text-white w-full border-b border-b-gray-500 border-opacity-10   px-4 py-2 text-sm dark:text-slate-300  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center capitalize rtl:space-x-reverse",children:[e("span",{className:"text-base",children:e(S,{icon:"heroicons:eye"})}),e("span",{children:"View"})]})}),e(D.Item,{onClick:()=>d(R(o)),children:l("div",{className:"hover:bg-slate-900 dark:hover:bg-slate-600 dark:hover:bg-opacity-70 hover:text-white w-full border-b border-b-gray-500 border-opacity-10   px-4 py-2 text-sm dark:text-slate-300  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center capitalize rtl:space-x-reverse",children:[e("span",{className:"text-base",children:e(S,{icon:"heroicons-outline:pencil-alt"})}),e("span",{children:"Edit"})]})}),e(D.Item,{onClick:()=>d(ae(o.id)),children:l("div",{className:"hover:bg-slate-900 dark:hover:bg-slate-600 dark:hover:bg-opacity-70 hover:text-white w-full border-b border-b-gray-500 border-opacity-10   px-4 py-2 text-sm dark:text-slate-300  last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex  space-x-2 items-center capitalize rtl:space-x-reverse",children:[e("span",{className:"text-base",children:e(S,{icon:"heroicons-outline:trash"})}),e("span",{children:"Delete"})]})})]})})})]})})},we=()=>{const o=T(),[a,g]=h.exports.useState("grid"),{width:b,breakpoints:k}=se(),[d,p]=h.exports.useState(!1),{cards:N}=E(m=>m.card);console.log("cards",N);const f=I(),{data:r,isLoading:i,isFetching:n,error:x,isError:v}=me(void 0,{skipPollingIfUnfocused:!0,refetchOnMountOrArgChange:!0,skip:!1});return h.exports.useEffect(()=>{v&&(x==null?void 0:x.status)===401&&(F.error("Session expired, please relogin"),localStorage.removeItem("token"),o("/"))},[x]),h.exports.useEffect(()=>{p(!0),n||i||p(!1)},[a,n,i]),l("div",{children:[e(le,{}),l("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[e("h4",{className:"font-medium lg:text-2xl text-xl capitalize text-slate-900 inline-block ltr:pr-4 rtl:pl-4",children:"Card"}),l("div",{className:`${b<k.md?"space-x-rb":""} md:flex md:space-x-4 md:justify-end items-center rtl:space-x-reverse`,children:[e(_,{icon:"heroicons:list-bullet",text:"List view",disabled:d,className:`${a==="list"?"bg-slate-900 dark:bg-slate-700  text-white":" bg-white dark:bg-slate-800 dark:text-slate-300"}   h-min text-sm font-normal`,iconClass:" text-lg",onClick:()=>g("list")}),e(_,{icon:"heroicons-outline:view-grid",text:"Grid view",disabled:d,className:`${a==="grid"?"bg-slate-900 dark:bg-slate-700 text-white":" bg-white dark:bg-slate-800 dark:text-slate-300"}   h-min text-sm font-normal`,iconClass:" text-lg",onClick:()=>g("grid")}),e(_,{icon:"heroicons-outline:plus",text:"Add Category",className:"btn-dark dark:bg-slate-800  h-min text-sm font-normal",iconClass:" text-lg",onClick:()=>f(G(!0))})]})]}),d&&a==="grid"&&e(re,{count:r==null?void 0:r.length}),d&&a==="list"&&e(ie,{count:r==null?void 0:r.length}),a==="grid"&&!d&&e("div",{className:"grid xl:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-5",children:r==null?void 0:r.map((m,c)=>e(pe,{card:m},c))}),a==="list"&&!d&&e("div",{children:e(ue,{cards:r})}),e(he,{}),e(ge,{})]})};export{we as default};
