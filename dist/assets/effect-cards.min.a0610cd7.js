import{$ as y}from"./index.c3bfd613.js";function C(t){const{effect:r,swiper:e,on:f,setTranslate:o,setTransition:s,overwriteParams:n,perspective:i,recreateShadows:h,getEffectParams:p}=t;f("beforeInit",()=>{if(e.params.effect!==r)return;e.classNames.push(`${e.params.containerModifierClass}${r}`),i&&i()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const l=n?n():{};Object.assign(e.params,l),Object.assign(e.originalParams,l)}),f("setTranslate",()=>{e.params.effect===r&&o()}),f("setTransition",(l,m)=>{e.params.effect===r&&s(m)}),f("transitionEnd",()=>{if(e.params.effect===r&&h){if(!p||!p().slideShadows)return;e.slides.each(l=>{e.$(l).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()}),h()}});let c;f("virtualUpdate",()=>{e.params.effect===r&&(e.slides.length||(c=!0),requestAnimationFrame(()=>{c&&e.slides&&e.slides.length&&(o(),c=!1)}))})}function I(t,r){return t.transformEl?r.find(t.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):r}function q({swiper:t,duration:r,transformEl:e,allSlides:f}){const{slides:o,activeIndex:s,$wrapperEl:n}=t;if(t.params.virtualTranslate&&r!==0){let i=!1,h;f?h=e?o.find(e):o:h=e?o.eq(s).find(e):o.eq(s),h.transitionEnd(()=>{if(i||!t||t.destroyed)return;i=!0,t.animating=!1;const p=["webkitTransitionEnd","transitionend"];for(let c=0;c<p.length;c+=1)n.trigger(p[c])})}}function k(t,r,e){const f=`swiper-slide-shadow${e?`-${e}`:""}`,o=t.transformEl?r.find(t.transformEl):r;let s=o.children(`.${f}`);return s.length||(s=y(`<div class="swiper-slide-shadow${e?`-${e}`:""}"></div>`),o.append(s)),s}function X({swiper:t,extendParams:r,on:e}){r({cardsEffect:{slideShadows:!0,transformEl:null,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),C({effect:"cards",swiper:t,on:e,setTranslate:()=>{const{slides:s,activeIndex:n}=t,i=t.params.cardsEffect,{startTranslate:h,isTouched:p}=t.touchEventsData,c=t.translate;for(let l=0;l<s.length;l+=1){const m=s.eq(l),M=m[0].progress,a=Math.min(Math.max(M,-4),4);let E=m[0].swiperSlideOffset;t.params.centeredSlides&&!t.params.cssMode&&t.$wrapperEl.transform(`translateX(${t.minTranslate()}px)`),t.params.centeredSlides&&t.params.cssMode&&(E-=s[0].swiperSlideOffset);let u=t.params.cssMode?-E-t.translate:-E,$=0;const S=-100*Math.abs(a);let v=1,T=-i.perSlideRotate*a,b=i.perSlideOffset-Math.abs(a)*.75;const g=t.virtual&&t.params.virtual.enabled?t.virtual.from+l:l,x=(g===n||g===n-1)&&a>0&&a<1&&(p||t.params.cssMode)&&c<h,w=(g===n||g===n+1)&&a<0&&a>-1&&(p||t.params.cssMode)&&c>h;if(x||w){const d=(1-Math.abs((Math.abs(a)-.5)/.5))**.5;T+=-28*a*d,v+=-.5*d,b+=96*d,$=`${-25*d*Math.abs(a)}%`}if(a<0?u=`calc(${u}px + (${b*Math.abs(a)}%))`:a>0?u=`calc(${u}px + (-${b*Math.abs(a)}%))`:u=`${u}px`,!t.isHorizontal()){const d=$;$=u,u=d}const P=a<0?`${1+(1-v)*a}`:`${1-(1-v)*a}`,O=`
        translate3d(${u}, ${$}, ${S}px)
        rotateZ(${i.rotate?T:0}deg)
        scale(${P})
      `;if(i.slideShadows){let d=m.find(".swiper-slide-shadow");d.length===0&&(d=k(i,m)),d.length&&(d[0].style.opacity=Math.min(Math.max((Math.abs(a)-.5)/.5,0),1))}m[0].style.zIndex=-Math.abs(Math.round(M))+s.length,I(i,m).transform(O)}},setTransition:s=>{const{transformEl:n}=t.params.cardsEffect;(n?t.slides.find(n):t.slides).transition(s).find(".swiper-slide-shadow").transition(s),q({swiper:t,duration:s,transformEl:n})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode})})}export{X as E,I as a,q as b,C as e};
